!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("hyperapp")):"function"==typeof define&&define.amd?define(["exports","hyperapp"],t):t(n.HoaRouter={},n.hyperapp)}(this,function(n,t){"use strict";function f(n,t,e,r){return{isExact:n,path:t,url:e,params:r}}function s(n){for(var t=n.length;"/"===n[--t];);return n.slice(0,t+1)}function p(t){try{return decodeURIComponent(t)}catch(n){return t}}var l=void 0,h=function(){};function d(n){l||(l=n)}function v(n){var t=n.pathFn,r=n.history,e=n.state,o=n.beforeChange,i=void 0===o?h:o,u=n.afterChange,a=void 0===u?h:u;d(t);var c=r.location.pathname,f={push:function(n){r.push(n)},replace:function(n){r.replace(n)},onChange:function(n){var t=n.location,e=n.action;return function(n){return y(t.pathname,n.pathname,e,n.sessions)}}};return{state:e||m(c,c,[c],g.none),actions:f,subscribe:function(e){return r.listen(function(n,t){i(e,l,r)||(l(e).onChange({location:n,action:t}),a(e,l,r))}),e}}}var g={backward:0,forward:1,none:2},m=function(n,t,e,r){return{pathname:n,previous:t,sessions:e,direction:r}},y=function(n,t,e,r){var o=-1<r.indexOf(n),i={POP:0,PUSH:1,REPLACE:2}[e]+(o?0:1);return r=[function(){return r.slice(0,-1)},function(){return r.concat(n)},function(){return r.slice(0,-1).concat(n)}][i](),m(n,t,r,i)};function a(n){return n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")}n.withRouter=function(c){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"router",s=arguments[2];return function(n,t,e,r){d(function(n){return n[f]});var o=v(s),i=o.subscribe,u=o.state,a=o.actions;return n[f]=u,t[f]=a,i(c(n,t,e,r))}},n.initPathFn=d,n.routerFactory=v,n.enmuDirection=g,n.Switch=function(n,o){return function(n,t){for(var e,r=0;!(e=o[r]&&o[r](n,t))&&r<o.length;)r++;return e}},n.Route=function(r){return function(n,t){n=l(n);var e=function(n,t,e){if(n===t||!n)return f(n===t,n,t);var r=e&&e.exact,o=s(n).split("/"),i=s(t).split("/");if(!(o.length>i.length||r&&o.length<i.length)){var u=0,a={},c=o.length;for(t="";u<c;u++){if(":"===o[u][0])a[o[u].slice(1)]=i[u]=p(i[u]);else if(o[u]!==i[u])return;t+=i[u]+"/"}return f(!1,n,t.slice(0,-1),a)}}(r.path,n.pathname,{exact:!r.parent});return e&&r.render({match:e,state:n})}},n.Redirect=function(e){return function(n,t){l(t).replace(e.to)}},n.Link=function(u,n){return function(e,r){var o=u.to,i=u.onclick;return delete u.to,delete u.location,u.href=o,u.onclick=function(n){var t;i&&i(n),n.defaultPrevented||0!==n.button||n.altKey||n.metaKey||n.ctrlKey||n.shiftKey||"_blank"===u.target||(t=n.currentTarget,a(window.location)!==a(t))||(n.preventDefault(),o!==l(e).pathname&&l(r).push(o))},t.h("a",u,n)}},Object.defineProperty(n,"__esModule",{value:!0})});